mandatory: True
code: |
  interview_metadata # make sure we initialize the object
  if not defined("interview_metadata['CRA_Motion_to_Dismiss0019']"):
    interview_metadata.initializeObject('CRA_Motion_to_Dismiss0019')
  interview_metadata['CRA_Motion_to_Dismiss0019'].update({
    'title': 'Child Requiring Assistance Motion to Dismiss Application for Assistance',
    'short title': 'CRA Motion to Dismiss',
    'description': 'Request the judge to dismiss the CRA case by filing this motion. For more information see x.',
    'original_form': 'https://www.mass.gov/doc/cra-motion-to-dismiss-jv-091/download',
    'allowed courts': [
      'Juvenile Court',
    ],
    'preferred court': 'Juvenile Court',
    'categories': [
      'Family Law',
      'Guardianship',
    ],
    'logic block variable': 'CRA_Motion_to_Dismiss0019',
    'attachment block variable': 'CRA_Motion_to_Dismiss0019_attachment',
    'typical role': 'unknown',
    'built_in_fields_used': [
      {'variable': 'court_county',
       'transformed_variable': 'courts[0].address.county',
      },
      {'variable': 'docket_number',
       'transformed_variable': 'docket_numbers[0]',
      },
      {'variable': 'user_signature',
       'transformed_variable': 'users[0].signature',
      },
      {'variable': 'signature_date',
       'transformed_variable': 'signature_date',
      },
      {'variable': 'user_name',
       'transformed_variable': 'str(users[0])',
      },
      ],
    'fields': [
      {'variable': '',
       'transformed_variable': '',
      'field_type': 'yesno',
      },
      {'variable': 'case_name',
       'transformed_variable': 'case_name',
      'field_type': 'text',
      'field_data_type': 'text',
      },
      {'variable': 'application_date',
       'transformed_variable': 'application_date',
      'field_type': 'text',
      'field_data_type': 'date',
      },
      {'variable': 'is_applicant',
       'transformed_variable': 'is_applicant',
      'field_type': 'yesno',
      },
      {'variable': 'is_child',
       'transformed_variable': 'is_child',
      'field_type': 'yesno',
      },
      {'variable': 'is_legal_guardian',
       'transformed_variable': 'is_legal_guardian',
      'field_type': 'yesno',
      },
      {'variable': 'factfinding_hearing_has_occurred',
       'transformed_variable': 'factfinding_hearing_has_occurred',
      'field_type': 'yesno',
      },
      {'variable': 'has_not_occurred',
       'transformed_variable': 'has_not_occurred',
      'field_type': 'yesno',
      },
      {'variable': 'reasons_for_request',
       'transformed_variable': 'reasons_for_request',
      'field_type': 'text',
      'field_data_type': 'text',
      },
      {'variable': 'user_title',
       'transformed_variable': 'users[0].title',
      'field_type': 'text',
      'field_data_type': 'text',
      },
      {'variable': 'service_date',
       'transformed_variable': 'service_date',
      'field_type': 'text',
      'field_data_type': 'date',
      },
      {'variable': '',
       'transformed_variable': '',
      'field_type': 'yesno',
      },
      ],
  })
---
question: |
  Has the fact-finding hearing occurred?
fields:
  no label: factfinding
  datatype: radio
  choices: 
    A Fact-finding hearing has occurred: factfindingyes
    A Fact-finding hearing has not occurred: factfindingno

---
code: |
 factfinding_hearing_has_occurred = factfinding == "factfindingyes"
 has_not_occurred = factfinding == "factfindingno"
---
question: |
  I certify that I have served the within motion to all counsel of record by first-class mail, postage prepaid.
subquestion: |
  Placeholder text
fields:
  - 'I certify': service
    datatype: yesno
---
question: |
  I certify that the motion was served on :
fields:
  - 'Service date': service_date
    datatype: date
---
question: |
  What case is this motion regarding?
subquestion: |
  placeholder text
fields:
  - 'Case name': case_name
---

question: |
  What is your relationship to the application?
subquestion: |
  I am the:
fields:
  no label: relationship
  datatype: radio
  choices: 
    applicant: applicant
    child: child
    legal guardian: legal guardian
---
code: |
 is_applicant = relationship == "applicant"
 is_child = relationship == "child"
 is_legal_guardian = relationship == "legal guardian"
---
question: |
  What is your title?
subquestion: |
  Placeholder text
fields:
  - 'User title': users[0].title
---
question: |
  When was the Application for Child Requiring Assistance filed?
subquestion: |
  Placeholder text
fields:
  - 'Application date': application_date
    datatype: date
---
question: |
  Why do you want the Application for Child Requiring Assistance dismissed?
fields:
  - 'Reason(s)': reasons_for_request
---
progress: 100
mandatory: True
question: |
  Placeholder download screen
subquestion: |
  Placeholder
  
  ### Next steps
  
  1. Step 1
  1. Step 2
  
  Below is a preview of your form.
  
  ${CRA_Motion_to_Dismiss0019_attachment }
attachment code: CRA_Motion_to_Dismiss0019_attachment
---
need: CRA_Motion_to_Dismiss0019
attachment:
    variable name: CRA_Motion_to_Dismiss0019_attachment
    name: CRA Motion to Dismiss
    filename: CRA_Motion_to_Dismiss
    pdf template file: CRA_Motion_to_Dismiss0019.pdf
    fields: 
      - "court_county": ${ courts[0].address.county }
      - "docket_number": ${ docket_numbers[0] }
      - "user_signature": ${ users[0].signature }
      - "signature_date": ${ signature_date }
      - "user_name": ${ str(users[0]) }
      - "case_name": ${ case_name }
      - "application_date": ${ application_date }
      - "is_applicant": ${ is_applicant }
      - "is_child": ${ is_child }
      - "is_legal_guardian": ${ is_legal_guardian }
      - "factfinding_hearing_has_occurred": ${ factfinding_hearing_has_occurred }
      - "has_not_occurred": ${ has_not_occurred }
      - "reasons_for_request": ${ reasons_for_request }
      - "user_title": ${ users[0].title }
      - "service_date": ${ service_date }
      - "user_signature_2": ${ users[0].signature if service else "" }
---
include:
  - docassemble.MAVirtualCourt:basic-questions.yml
---
comment: |
  This question is used to introduce your interview. Please customize
continue button field: CRA_Motion_to_Dismiss0019_intro
question: |
  Motion to Dismiss Application for Child Requiring Assistance (CRA)
subquestion: |
  This form asks the court to dismiss an Application for Child Requiring Assistance. For more information see x. 
---
id: interview_order_CRA_Motion_to_Dismiss0019
code: |
  # This is a placeholder to control logic flow in this interview
  # It was generated from interview_generator.py as an 'interview order' type question.
  basic_questions_intro_screen 
  CRA_Motion_to_Dismiss0019_intro
  # Set the preferred/allowed courts for this interview
  preferred_court = interview_metadata["CRA_Motion_to_Dismiss0019"]["preferred court"]
  allowed_courts = interview_metadata["CRA_Motion_to_Dismiss0019"]["allowed courts"]
  case_name
  is_applicant
  application_date
  factfinding_hearing_has_occurred
  reasons_for_request
  users[0].title
  if service:
    service_date
  courts[0].address.county
  docket_numbers[0]
  basic_questions_signature_flow
  users[0].signature
  signature_date
  str(users[0])
  # By default, we'll mark any un-filled fields as DAEmpty(). This helps avoid errors if you intentionally hide a logic branch or mark a question not required
  # Comment out the line below if you don't want this behavior. 
  mark_unfilled_fields_empty(interview_metadata["CRA_Motion_to_Dismiss0019"])
  CRA_Motion_to_Dismiss0019_preview_question # Pre-canned preview screen
  CRA_Motion_to_Dismiss0019 = True
---
continue button field: CRA_Motion_to_Dismiss0019_preview_question
question: |
  Placeholder preview screen
subquestion: |
  Here is a preview of the form you'll sign on the next page. 
  
   ${CRA_Motion_to_Dismiss0019_attachment_preview}
---
attachment:
    variable name: CRA_Motion_to_Dismiss0019_attachment_preview
    name: CRA Motion to Dismiss
    filename: CRA_Motion_to_Dismiss
    pdf template file: CRA_Motion_to_Dismiss0019.pdf
    fields: 
      - "court_county": ${ courts[0].address.county }
      - "docket_number": ${ docket_numbers[0] }
      - "signature_date": ${ signature_date }
      - "user_name": ${ str(users[0]) }
      - "case_name": ${ case_name }
      - "application_date": ${ application_date }
      - "is_applicant": ${ is_applicant }
      - "is_child": ${ is_child }
      - "is_legal_guardian": ${ is_legal_guardian }
      - "factfinding_hearing_has_occurred": ${ factfinding_hearing_has_occurred }
      - "has_not_occurred": ${ has_not_occurred }
      - "reasons_for_request": ${ reasons_for_request }
      - "user_title": ${ users[0].title }
      - "service_date": ${ service_date }
      - "user_signature_2": ${ users[0].signature if service else ""}